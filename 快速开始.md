# 🚀 快速开始指南

## 1️⃣ 立即预览

### 方式一：直接在浏览器中查看演示效果

1. 用浏览器打开 `demo.html` 文件
2. 2秒后会自动显示模拟用户数据
3. 可以使用页面上的按钮测试各种功能

### 方式二：查看原始应用页面

1. 用浏览器打开 `index.html` 文件
2. 会显示"当前不在飞书应用环境中"的错误提示
3. 可以点击调试按钮查看模拟数据

## 2️⃣ 配置飞书应用

### 步骤1：在飞书开放平台创建应用

1. 访问 [飞书开放平台](https://open.feishu.cn/)
2. 登录并创建一个新的网页应用
3. 记录下 `App ID` 和 `App Secret`

### 步骤2：配置应用参数

1. 打开 `config.js` 文件
2. 将你的 App ID 填入：
   ```javascript
   APP_ID: '你的App ID',
   ```
3. 开发环境下可以填入 App Secret：
   ```javascript
   APP_SECRET: '你的App Secret',
   ```

### 步骤3：配置飞书应用设置

在飞书开放平台的应用设置中：

1. **安全域名**: 添加你的网站域名
2. **重定向URL**: 设置为你的页面地址
3. **权限申请**: 申请获取用户基本信息的权限

## 3️⃣ 部署到服务器

### 上传文件

将所有文件上传到你的Web服务器：
- `index.html`（主页面）
- `demo.html`（演示页面）
- `style.css`（样式文件）
- `script.js`（逻辑文件）
- `config.js`（配置文件）

### HTTPS要求

⚠️ **重要**: 飞书应用必须使用HTTPS协议，确保你的服务器支持SSL证书。

## 4️⃣ 在飞书中配置

### 创建飞书应用

1. 在飞书管理后台创建一个工作台应用
2. 设置应用首页URL为你的 `index.html` 地址
3. 发布应用供用户使用

### 测试应用

1. 在飞书客户端中打开你的应用
2. 应该能自动获取并显示用户信息
3. 如有问题，查看调试信息进行排查

## 5️⃣ 生产环境优化

### 安全建议

1. **不要在前端暴露 App Secret**
2. **在后端处理token交换**
3. **使用HTTPS协议**
4. **配置正确的安全域名**

### 后端API示例

```javascript
// Node.js + Express 示例
app.post('/api/auth/feishu', async (req, res) => {
    const { code } = req.body;
    
    // 使用code换取access_token
    const tokenResponse = await fetch('https://open.feishu.cn/open-apis/authen/v1/access_token', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            grant_type: 'authorization_code',
            code: code,
            app_id: process.env.FEISHU_APP_ID,
            app_secret: process.env.FEISHU_APP_SECRET
        })
    });
    
    const tokenData = await tokenResponse.json();
    
    // 获取用户信息
    const userResponse = await fetch('https://open.feishu.cn/open-apis/authen/v1/user_info', {
        headers: { 'Authorization': `Bearer ${tokenData.access_token}` }
    });
    
    const userData = await userResponse.json();
    res.json(userData);
});
```

## 🛠️ 故障排除

### 常见问题

| 问题 | 原因 | 解决方案 |
|------|------|----------|
| 显示"不在飞书环境中" | 在普通浏览器中打开 | 在飞书客户端中打开应用 |
| 免登陆失败 | App ID配置错误 | 检查config.js中的APP_ID |
| 获取用户信息失败 | 权限不足或API调用错误 | 检查应用权限和API调用 |
| 页面样式错误 | CSS文件加载失败 | 检查文件路径和服务器配置 |

### 调试技巧

1. 打开浏览器开发者工具查看Console输出
2. 检查调试信息区域的详细日志
3. 使用演示页面的调试按钮测试功能
4. 查看网络请求是否成功

## 📞 获取帮助

- [飞书开放平台文档](https://open.feishu.cn/document/)
- [免登陆开发指南](https://open.feishu.cn/document/ukTMukTMukTM/ukzN4UjL5cDO14SO3gTN)
- [JS SDK文档](https://open.feishu.cn/document/ukTMukTMukTM/uYTM5UjL2ETO14iNxkTN/h5_js_sdk/h5_js_sdk_overview)

---

🎉 **恭喜！** 你已经成功创建了一个飞书应用免登陆项目！ 